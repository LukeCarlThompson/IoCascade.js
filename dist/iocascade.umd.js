!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("iocascade",t):(e=e||self).iocascade=t()}(this,function(){"use strict";return function(e){var t=this;void 0===e&&(e={});var r=e.selector;void 0===r&&(r="[data-io]");var o=e.classToAdd;void 0===o&&(o="io-in");var i=e.delay;void 0===i&&(i=100);var n=e.threshold;void 0===n&&(n=0);var a=e.rootMargin;void 0===a&&(a="0px 100px 0px 100px");var s=e.root;if(void 0===s&&(s=null),this.selector=r||"[data-io]",this.bareSelector=r?r.replace(/[\[\].]+/g,""):"data-io",this.classToAdd=o||"io-in",this.delay=i||100,this.threshold=n||0,this.rootMargin=a||"0px 100px 0px 100px",this.queue=[],r.replace(/[\[\].]+/g,""),!("IntersectionObserver"in window))return console.log("The javascript feature intersection Observer is not supported in your browser. We suggest upgrading to a more modern browser for a better experience."),void document.querySelectorAll(r).forEach(function(e){e.removeAttribute(t.bareSelector)});var u=!0,c=function(e){return"child"===e.getAttribute(t.bareSelector)},d=function(e){if(e.length>=1&&u){u=!1;var r=e.shift(),o=r.getAttribute("data-delay")||t.delay;setTimeout(function(){r.classList.add(t.classToAdd),u=!0,d(e)},o)}},l={root:s,threshold:this.threshold,rootMargin:this.rootMargin},h=new IntersectionObserver(function(e,r){for(var o=0;o<e.length;o++){var i=e[o],a=i.target;if(i.intersectionRatio>=n&&!c(a)){var s=a.querySelectorAll('[data-io="child"]');s.length?(t.queue.push(a),s.forEach(function(e){t.queue.push(e)}),d(t.queue)):i.isIntersecting&&(t.queue.push(a),d(t.queue)),r.unobserve(i.target)}}},l);Array.prototype.slice.call(document.querySelectorAll(r)).forEach(function(e){return h.observe(e)})}});